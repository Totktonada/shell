* Есть мысль: считать ";" разделителем списков. В command хранить ссылку на все n списков, разделённых ";" (или по одной ссылке с command, с указанием на следующий command). Возможно, это будет проще.
